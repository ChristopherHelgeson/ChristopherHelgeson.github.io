<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Oswald" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="public/css/index.css">
    <link rel="stylesheet" type="text/css" href="public/css/clock.css">
    <link rel="stylesheet" type="text/css" href="public/css/weather.css">
    <!-- following line for jquery - needed for parallax and others -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <script>
      // wait until page is loaded before performing function
      $(document).ready(function() {

        // when an 'a' tag is clicked . . .
        $("a").click(function() {
          // this.hash reads href attribute of current tag including the '#'
          if(this.hash){
            console.log(this.hash);
            // set 'hash' to the id without the '#' (i.e. start at index 1)
            var hash = this.hash.substr(1);
            console.log(hash);
            // set '$toElement' to ???
            var $toElement = $("[id="+hash+"]");
            console.log($toElement);
            // set 'toPosition' to top x value of the element container
            var toPosition = $toElement.position().top;
            console.log(toPosition);
            // for elements within either 'body' or 'html' tags, animate
            // transition from scrollTop (HTML property) to
            //toPosition (var defined above = top of element)
            // over 2000 milliseconds
            // and when complete, execute callback to 'easeOutExpo' function
            $("body,html").animate({
              scrollTop : toPosition
            },2000)
          }
        });
      });
    </script>

  </head>
  <!-- <body id="weather-body" class="parallax"> -->
  <body id="weather-body" class="parallax">
    <nav class="navbar">
      <ul>
        <li>
          <a href="#page-title">Title</a>
        </li>
        <li>
          <a href="#boxone">Device Info</a>
        </li>
        <li>
          <a href="#boxtwo">Clock</a>
        </li>
        <li>
          <a href="#boxthree">Weather</a>
        </li>
        <li>
          <a href="#boxfour">360 Photo</a>
        </li>
        <li>
          <a href="#boxfive">N103SP</a>
        </li>
      </ul>
    </nav>

<!-- TITLE BLOCK SECTION -->

    <a id="page-title"> </a>
    <div class="text-block title-block">
      <h1>Experiments in Web Design</h1>
    </div>

<!-- SECTION ONE -->

      <script>
        jQuery(document).ready(function() {
          var userAgentString = navigator.userAgent;
          document.getElementById("user-agent-string").innerHTML = ("COMPLETE userAgent STRING: " + userAgentString);

          // determine browser
          if ((userAgentString.search("Firefox") > -1) && (userAgentString.search("Seamonkey") == -1)) {
            var browser = "Firefox";
          } else if ((userAgentString.search("Edge") == -1) && (userAgentString.search("Chrome") > -1)) {
            var browser = "Chrome";
          // } else if (userAgentString.search("Opera"|"OPR") > -1) {
          //   var browser = "Opera";
          } else if (userAgentString.search("Edge") > -1) {
            var browser = "Edge";
          } else if ((userAgentString.search("Chrome") == -1) && (userAgentString.search("Chromium") == -1) && (userAgentString.search("Safari") > -1)) {
            var browser = "Safari";
          } else {
            var browser = "not able to detect.";
          };
          document.getElementById("browser-type").innerHTML = ("BROWSER: " + browser);

          // determine whether mobile device
          if (userAgentString.search("iPad") > -1) {
            var mobileType = "iPad";
          } else if (userAgentString.search("iPhone") > -1) {
            var mobileType = "iPhone";
          } else if (userAgentString.search("iPod") > -1) {
            var mobileType = "iPod";
          } else {
            var mobileType = "not an Apple mobile device";
          };
          document.getElementById("device-type").innerHTML = ("DEVICE TYPE: " + mobileType);

          // determine operating system
          if (userAgentString.search("Windows") > -1) {
            var opSys = "Windows";
          } else if (userAgentString.search("OS") > -1) {
            var opSys = "iOS";
          } else {
            var opSys = "Unix";
          };
          document.getElementById("operating-system").innerHTML = ("OPERATING SYSTEM: " + opSys);

        });
      </script>

      <a id="boxone"> </a>
      <div class="text-block one-block">
        <h1>Working with User Device Info</h1>
        <br>
        <p id="user-agent-string"></p>
        <p id="browser-type"></p>
        <p id="device-type">No iPad, iPhone, or iPad detected.</p>
        <p id="operating-system"></p>
      </div>

<!-- CLOCK SECTION -->

      <a id="boxtwo"> </a>
      <div class="text-block clock-block">
        <h1>Working with JavaScript Libraries (moment.js)</h1>
        <br>
  <!-- Date and time from Alison Major demo -->
        <h1 id="current-date" class="text-center h3 date-text">
          01 January 1999
        </h1>
        <h2 id="current-time" class="text-center really-big-text">
          12:00 PM
        </h2>
        <br>
  <!-- hero clock from moment.js -->
        <div class="hero-circle">
    			<div class="hero-face">
    				<div id="hour" class="hero-hour"></div>
    				<div id="minute" class="hero-minute"></div>
    				<div id="second" class="hero-second"></div>
    			</div>
    		</div>
      </div>

<!-- WEATHER SECTION -->

      <a id="boxthree"> </a>
      <div class="text-block weather-block">
        <h1>Working with APIs</h1>
        <br>
        <a href="https://www.weatherunderground.com" target="_blank">
          <img id="WUlogo" src="public/images/wundergroundLogo_4c_rev_horz.png" />
        </a>

        <script>
        jQuery(document).ready(function($) {
          $.ajax({
          url : "https://api.wunderground.com/api/12b8a40c145b360a/geolookup/conditions/q/MI/Grand_Rapids.json",
          dataType : "jsonp",
          success : function(parsed_json) {
            var obs_time = parsed_json['current_observation']['observation_time'];
            var full_loc = parsed_json['current_observation']['display_location']['full'];
            var weather = parsed_json['current_observation']['weather'];
            var temperature = parsed_json['current_observation']['temperature_string'];
            var dewpoint = parsed_json['current_observation']['dewpoint_string'];
            var humidity = parsed_json['current_observation']['relative_humidity'];
            var wind_string = parsed_json['current_observation']['wind_string'];
            var pressure_in = parsed_json['current_observation']['pressure_in'];
            var pressure_trend = parsed_json['current_observation']['pressure_trend'];
            var icon = parsed_json['current_observation']['icon'];
          document.getElementById("obs_time").innerHTML = (obs_time);
          document.getElementById("full_loc").innerHTML = ("Observation for: " + full_loc);
          document.getElementById("weather").innerHTML = ("Weather: " + weather);
          document.getElementById("temperature").innerHTML = ("Temperature: " + temperature);
          document.getElementById("dewpoint").innerHTML = ("Dewpoint: " + dewpoint);
          document.getElementById("humidity").innerHTML = ("Humidity: " + humidity);
          document.getElementById("wind").innerHTML = ("Wind: " + wind_string);
          document.getElementById("pressure").innerHTML = ("Pressure: " + pressure_in + " " + pressure_trend);
          document.getElementById("icon").innerHTML = ("<img src='public/images/weather-underground-icons/dist/icons/white/png/256x256/" + icon + ".png'>");

          //check if id weather-body exists -- removed from body tag so parallax will work
          if(document.getElementById("weather-body")) {
          if (weather === "Overcast" || weather === "Cloudy" || weather === "Mostly Cloudy") {
            document.getElementById("weather-body").style.backgroundImage = "url('public/images/Background-Cloudy.jpg')";
          }
          else if (weather === "Foggy") {
            document.getElementById("weather-body").style.backgroundImage = "url('public/images/Background-Foggy.png')";
          }
          else if (weather === "Rain" || weather === "Showers") {
            document.getElementById("weather-body").style.backgroundImage = "url('public/images/Background-Rain.jpg')";
          }
          else if (weather === "Snow" || weather === "Flurries") {
            document.getElementById("weather-body").style.backgroundImage = "url('public/images/Background-Snow.jpg')";
          }
          else if (weather === "Sunny" || weather === "Clear") {
            document.getElementById("weather-body").style.backgroundImage = "url('public/images/Background-Sunny.jpg')";
          }
          else if (weather === "Partly Cloudy") {
            document.getElementById("weather-body").style.backgroundImage = "url('public/images/Background-PartlyCloudy.jpg')";
          }
          else {
            document.getElementById("weather-body").style.backgroundImage = "url('public/images/Background-NoPhoto.jpg')";
          }
          }
          }
          });
        });
        </script>
        <p>Powered by Weather Underground</p>
        <p id="obs_time" class="updated"></p>
        <h1 id="full_loc" class="weather"></h1>
        <h1 id="weather" class="weather"></h1>
        <h1 id="temperature" class="weather"></h1>
        <h1 id="dewpoint" class="weather"></h1>
        <h1 id="humidity" class="weather"></h1>
        <h1 id="wind" class="weather"></h1>
        <h1 id="pressure" class="weather"></h1>
        <h1 id="icon" class="weather"></h1>
      </div>

<!-- SECTION FOUR: 360 Photo -->

      <a id="boxfour"> </a>
      <div class="text-block four-block">
        <h1>Working with Inline Frames (html iframe tag)</h1>
        <br>
        <iframe src="https://www.360cities.net/embed_iframe/petite-suisse-france"
          width="908" height="673" frameborder="0" bgcolor="#000000" target="_blank"
          allowfullscreen webkitallowfullscreen mozallowfullscreen>
        </iframe>
      </div>

<!-- SECTION FIVE -->

      <a id="boxfive"> </a>
      <div class="text-block five-block">
        <h1>Working with Static Images</h1>
        <p></p>
        <img src="/public/images/N103SPairplane.jpg">
      </div>

<!-- SECTION SIX -->

      <a id="boxsix"> </a>
      <div class="text-block six-block">
        <h1>Working with Scraping</h1>
        <p></p>
      </div>

<!-- SCRIPTS -->

      <!-- This imports the moment.js minified library for the analog clock-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.19.1/moment.min.js"></script>

      <!-- This imports the javascript we're writing in scripts.js -->
      <script src="public/javascript/clock.js"></script>

<!-- FOOTER -->

      <footer>
          <p class="alignleft"><a href="#top">Return to top of page</a></p>
          <p class="alignright">&copy; 2017 Christopher Helgeson</p>
      </footer>
  </body>
</html>
